import { Router } from "express";
import { getUserProfile, getUserById, updateUser, deleteUser, getMyProfile, getTopTraders, getTradersList, toggleFollow, getLikesAndFollowing, getCoinPurchaseHistory, getCoinDeductionHistory, getCoinTransactionHistory, getPayPalTransactions, updateUserProfile, getShipmentLog, trackShipment, getShippingLabel, getCategoryShippingRateHistory, createCategoryShippingRate, updateCategoryShippingRate, deleteCategoryShippingRate, getBoughtAndSoldProducts, getOngoingTrades, getTradeDetail, getCompletedTrades, getCancelledTrades, getNotifications, getAddresses, getAddressById, createAddress, updateAddress, deleteAddress, markAddressAsDefault, submitRating, markAllNotificationsAsRead, getMyTickets, confirmPayment, cancelShippingPayment, changePassword, buyCardCollectionReview, checkWordQuality, getCategoryShippingRate, verifyTokenAndGetProfile } from "../controllers/user.controller.js";
import { getTradeDetail as getTradeDetailNew } from "../controllers/tradeDetail.controller.js";
import { payToChangeTradeStatus, payPalPaymentSuccess, payPalPaymentCancel, handlePayPalResponse, payToChangeTradeStatusCounterOffer } from "../controllers/payment.controller.js";
import { getCopyProductFormFields } from "../controllers/tradingcard.controller.js";
import { cartOffer, cartOfferDealzone, getCart, processCheckout, payNowPayment, feedPayPalPaymentReturn, feedPayPalPaymentNotify, removeCartItem, tradeProposal, proposeTrade, cancelTrade, editTradeProposalDetail, editTradeProposal, reviewTradeProposal, acceptTrade, getShippingAddress, shipmentInitialize, getShippingParcel, saveParcel, getShippingCarrier, getShippingCheckout, shippingCheckout, shippingConfirmOrder, getTradeCounterDetail, shippingTradeSuccess, confirmPaymentReceived, completeTradeSender, getShippingAddressDetails, shippingBuysellInitialize, getShippingParcelBuysell, saveParcelBuysell, getShipmentCarrierBuysell, shippingCheckoutBuysell, getShippingCheckoutBuysell, makeCheckoutBuysell, shipmentCostPaymentSuccessForBuySell, receiveShipment, insureShipment, getAndUpdateShipmentStatus, getTradeProposalStatuses, markAsDefaultDeliveryAddress } from "../controllers/cart.controller.js";
import { userAuth } from "../middlewares/auth.middleware.js";
import { purchaseMembership } from "../controllers/membership.controller.js";
import { upload } from "../utils/fileUpload.js";
const router = Router();
router.post("/common/check-word-quality", checkWordQuality);
router.get("/profile", verifyTokenAndGetProfile);
router.get("/my-profile", userAuth, getMyProfile);
router.put("/profile", userAuth, upload.single('profile_picture'), updateUserProfile);
router.get("/profile/:userId", getUserProfile);
router.get("/top-traders", getTopTraders);
router.get("/traders-list", getTradersList);
router.post("/follow", toggleFollow);
router.get("/likes-and-following", getLikesAndFollowing);
router.get("/coin-purchase-history", getCoinPurchaseHistory);
router.get("/coin-deduction-history", getCoinDeductionHistory);
router.get("/coin-transaction-history", getCoinTransactionHistory);
router.get("/paypal-transactions", getPayPalTransactions);
router.get("/shipment-log", getShipmentLog);
router.get("/track-shipment/:tracking_id", trackShipment);
router.get("/shipping-label/:tracking_id", getShippingLabel);
router.get("/category-shipping-rate-history", getCategoryShippingRateHistory);
router.get("/category-shipping-rate-history/:id", getCategoryShippingRateHistory);
router.get("/category-shipping-rate", getCategoryShippingRate);
router.post("/category-shipping-rate-history", createCategoryShippingRate);
router.put("/category-shipping-rate-history/:id", updateCategoryShippingRate);
router.delete("/category-shipping-rate-history/:id", deleteCategoryShippingRate);
router.get("/bought-and-sold-products", getBoughtAndSoldProducts);
router.get("/bought-and-sold-products/:id", getBoughtAndSoldProducts);
router.get("/ongoing-trades", getOngoingTrades);
router.get("/ongoing-trades/:id", getOngoingTrades);
router.get("/trade-detail", getTradeDetail);
router.get("/trade-detail-enhanced", userAuth, getTradeDetailNew);
router.get("/completed-trades", getCompletedTrades);
router.get("/completed-trades/:id", getCompletedTrades);
router.get("/addresses", getAddresses);
router.get("/addresses/:id", getAddressById);
router.post("/addresses", createAddress);
router.put("/addresses/:id", updateAddress);
router.delete("/addresses/:id", deleteAddress);
router.put("/addresses/:id/mark-default", markAddressAsDefault);
router.get("/cancelled-trades", userAuth, getCancelledTrades);
router.get("/cancelled-trades/:id", userAuth, getCancelledTrades);
router.get("/notifications", userAuth, getNotifications);
router.put("/notifications/mark-all-read", userAuth, markAllNotificationsAsRead);
router.get("/my-tickets", userAuth, getMyTickets);
router.post("/confirm-payment", userAuth, confirmPayment);
router.post("/membership/purchase", userAuth, purchaseMembership);
router.post("/boughtsoldfeedback", userAuth, buyCardCollectionReview);
router.post("/submit-rating", userAuth, submitRating);
router.post("/make-offer/:id", userAuth, cartOffer);
router.post("/make-offer-dealzone/:id", userAuth, cartOfferDealzone);
router.get("/my-cart", userAuth, getCart);
router.delete("/remove-cart-item/:id", userAuth, removeCartItem);
router.get("/trade-proposal/:card_id/:interested_user", userAuth, tradeProposal);
router.post("/propose-trade", userAuth, proposeTrade);
router.post("/cancel-trade", userAuth, cancelTrade);
router.get("/edit-trade-proposal/:card_id", userAuth, editTradeProposalDetail);
router.post("/edit-trade-proposal", userAuth, editTradeProposal);
router.get("/review-trade-proposal/:card_id", userAuth, reviewTradeProposal);
router.post("/accept-trade", userAuth, acceptTrade);
router.get("/shipping-address", userAuth, getShippingAddress);
router.post("/shipment-initialize", userAuth, shipmentInitialize);
router.get("/shipping-parcel", userAuth, getShippingParcel);
router.post("/save-parcel", userAuth, saveParcel);
router.get("/shipping-carrier", userAuth, getShippingCarrier);
router.get("/shipping-checkout", userAuth, getShippingCheckout);
router.post("/shipping-checkout", userAuth, shippingCheckout);
router.post("/shipping-confirm-order", userAuth, shippingConfirmOrder);
router.post("/checkout", userAuth, processCheckout);
router.post("/pay-now", userAuth, payNowPayment);
router.get("/feed-paypal-payment-buysell/:type/:refId", feedPayPalPaymentReturn);
router.post("/notify/feed-paypal-payment-buysell/:refId", feedPayPalPaymentNotify);
router.post("/confirm-payment-received/:id", userAuth, confirmPaymentReceived);
router.post("/complete-trade-sender", userAuth, completeTradeSender);
router.get("/trade-counter-detail/:card_id", userAuth, getTradeCounterDetail);
router.post("/shipping-trade-success/:trade_id", userAuth, shippingTradeSuccess);
router.post("/shipping-trade-cancel", userAuth, cancelShippingPayment);
router.get("/shipping-address-details/:id", userAuth, getShippingAddressDetails);
router.post("/mark-default-delivery-address", userAuth, markAsDefaultDeliveryAddress);
router.post("/shipping-buysell-initialize", userAuth, shippingBuysellInitialize);
router.get("/shipping-parcel-buysell", userAuth, getShippingParcelBuysell);
router.post("/save-parcel-buysell", userAuth, saveParcelBuysell);
router.get("/shipment-carrier-buysell", userAuth, getShipmentCarrierBuysell);
router.post("/shipping-checkout-buysell", userAuth, shippingCheckoutBuysell);
router.get("/shipping-checkout-buysell", userAuth, getShippingCheckoutBuysell);
router.post("/shipment-cost-payment-success-buysell/:buy_sell_id", userAuth, shipmentCostPaymentSuccessForBuySell);
router.post("/make-checkout-buysell", userAuth, makeCheckoutBuysell);
router.post("/receive-shipment/:id", userAuth, receiveShipment);
router.post("/shipment-insure", userAuth, insureShipment);
router.post("/get-and-update-shipment-status", userAuth, getAndUpdateShipmentStatus);
router.get("/debug-trade-proposal-statuses", userAuth, getTradeProposalStatuses);
router.post("/pay-to-change-trade-status", userAuth, payToChangeTradeStatus);
router.post("/pay-to-change-trade-status-counter-offer", userAuth, payToChangeTradeStatusCounterOffer);
router.post("/handle-paypal-response", userAuth, handlePayPalResponse);
router.get("/payment-success/:refId/:itemName", payPalPaymentSuccess);
router.post("/change-password", userAuth, changePassword);
router.get("/payment-cancel/:refId", payPalPaymentCancel);
router.get("/copy-product-form-fields", userAuth, getCopyProductFormFields);
router.get("/:id", getUserById);
router.put("/:id", updateUser);
router.delete("/:id", deleteUser);
export default router;
